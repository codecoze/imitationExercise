<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BilibiliHead</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <div class="header_container">
        <div class="animated-banner">
            <div class="layer">
                <img src="./assets/5885cacaffb53a78be1e66bee0a1ee4d253709d4.png@1c.webp" data-height="1500" data-width="7467" height="600" width="2986" >
            </div>
            <div class="layer">
                <video loop src="./assets/video1.webm" playsinline width="105" height="105" data-height="300" data-width="300"></video>
            </div>
            <div class="layer">
                <img src="./assets/9e092f8f1b435daaf2c9fae0e9ddaf6c48e92332.png@1c.webp" data-height="1500" data-width="2364" height="450" width="709" 
                >
            </div>
            <div class="layer">
                <img src="./assets/2c9b8dc6c1453a175959cc6b98ca8404382b51ea.png@1c.webp" data-height="708" data-width="639" height="177" width="159" 
                >
            </div>
            <div class="layer">
                <video loop src="./assets/video2.webm" playsinline width="300" height="300"  data-height="300" data-width="300"></video>
            </div>
            <div class="layer">
                <img src="./assets/8d4405b6111256948fe5173f11ff05177432993b.png@1c.webp" data-height="1318" data-width="1332" height="329" width="333">
            </div>
            <div class="layer">
                <img src="./assets/2358ca61c912cac1f83393dffe4fbd56534b0434.png@1c.webp" data-height="454" data-width="573" height="72" width="91" 
                >
            </div>
            <div class="layer">
                <img src="./assets/028ef6e821838374a7f359fc94b25880c2ea240b.png@1c.webp" data-height="371" data-width="782" height="103" width="218" 
                >
            </div>
            <div class="layer">
                <img src="./assets/1cf5ccbdc2930bf0c3a57807fe249bff1d15a4b0.png@1c.webp" data-height="286" data-width="659" height="85" width="197" 
                >
            </div>
            <div class="layer">
                <img src="./assets/634d8932c8a5c10a9dbfef81492430e7972e52be.png@1c.webp" data-height="133" data-width="274" height="66" width="137" 
                >
            </div>
            <div class="layer">
                <img src="./assets/a532a95f2a4e9394c2fe8b87347497cd155614be.png@1c.webp" data-height="321" data-width="210" height="70" width="46" 
                >
            </div>
            <div class="layer">
                <img src="./assets/12af9b13bce57155d995eaff06e58a0c564ddd42.png@1c.webp" data-height="635" data-width="852" height="165" width="221" 
                >
            </div>
            <div class="layer">
                <img src="./assets/1b7364fdd41c5eab9241b0ebe1d8e7d6e0426037.png@1c.webp" data-height="503" data-width="172" height="150" width="51" 
                >
            </div>
            <div class="layer">
                <img src="./assets/226d3502c640a637e5b6ca95e6da24846504289e.png@1c.webp" data-height="539" data-width="263" height="161" width="78" 
                >
            </div>
            <div class="layer">
                <img src="./assets/1045c564a1d99f00360d9f423b76f06ad09d2948.png@1c.webp" data-height="1500" data-width="5626" height="450" width="1687" 
                >
            </div>
            <div class="layer">
                <img src="./assets/c21a3c29aaf80955b19fec131fd5b1aecf06a1c8.png@1c.webp" data-height="680" data-width="675" height="204" width="202" 
                >
            </div>
            <div class="layer">
                <img src="./assets/224da8789a22bcfca7e4a0f45f2e590c6ed34c8e.png@1c.webp" data-height="680" data-width="675" height="204" width="202" 
                >
            </div>
            <div class="layer">
                <img src="./assets/4b6c85d5ac04e7016e692e576f2e83d00cb5ff86.png@1c.webp" data-height="669" data-width="287" height="234" width="100" 
                >
            </div>
            <div class="layer">
                <img src="./assets/9131efa4854a089fad9061cfe07f21887ced078c.png@1c.webp" data-height="280" data-width="235" height="84" width="70" 
                >
            </div>
            <div class="layer">
                <img src="./assets/09d3644f210dfb4a8972a3c88a23af817c194957.png@1c.webp" data-height="1032" data-width="980" height="206" width="196" 
                >
            </div>
            <div class="layer">
                <img src="./assets/a7c3dcc7f2f545e077bc2e734d6f2ede2051d34c.png@1c.webp" data-height="1500" data-width="1428" height="465" width="442" 
                >
            </div>
            <div class="layer">
                <img src="./assets/d84afe572475b8efe87c52fe97b718ddb689b52b.png@1c.webp" data-height="414" data-width="826" height="132" width="264" 
                >
            </div>
            <div class="layer">
                <img src="./assets/537bda6d44c1c8a14ee96d644ff44772dcea9dd5.png@1c.webp" data-height="446" data-width="652" height="111" width="163">
            </div>
            <div class="layer">
                <img src="./assets/76f670872690db4a6b31d03cb51526b484ad88a4.png@1c.webp" data-height="667" data-width="282" height="233" width="98" 
                >
            </div>
            <div class="layer">
                <img src="./assets/fe7d5e9223e7772a88378e25e9a82076d4fc6f62.png@1c.webp" data-height="491" data-width="1072" height="137" width="300" 
                >
            </div>
        </div>
    </div>
    <script>
        //获取banner元素
        let banner = document.querySelector(".animated-banner");
        //获取所有图片和视频
        const childs = document.querySelectorAll("img, video");
        console.log(childs)
        //所有图片的样式
        const styleArray = [
            { x: -70, y: 0, filter_blur: 2, rotate: 0},
            { x: 256, y: 6, filter_blur: 2, rotate: 0},
            { x: 0, y: 0, filter_blur: 1, rotate: 0},
            { x: -363, y: -58, filter_blur: 1, rotate: 0},
            { x: -58, y: -23, rotate: 0},
            { x: 23, y: 29, rotate: 0},
            { x: 315, y: 46, rotate: 0},
            { x: -585, y: 26, rotate: 0},
            { x: -358, y: 41, rotate: 0},
            { x: 483, y: 3, rotate: 0},
            { x: 345, y: -38, rotate: 0},
            { x: 452, y: -120, rotate: 0},
            { x: 418, y: 0, rotate: 0},
            { x: -279, y: 0, rotate: 0},
            { x: 209, y: 7, rotate: 0},
            { x: 104, y: -14, rotate: 0},
            { x: 104, y: -14, rotate: 0},
            { x: -122, y: -82, rotate: 0},
            { x: 17, y: 45, rotate: 0},
            { x: -929, y: 0, rotate: 0},
            { x: -684, y: 0, rotate: 0},
            { x: -557, y: 33, rotate: 0},
            { x: 464, y: 58, rotate: 0},
            { x: 610, y: 0, rotate: 0},
            { x: 813, y: 32, rotate: 0},

        ];


        //初始化函数
        function init(){
            styleArray.forEach((ele,index)=>{
                childs[index].style =`
                 transform: translate(${ele.x}px,${ele.y}px) rotate(${ele.rotate}deg);flilter: blur(${ele.filter_blur}px);
                `
            })
        }
        init();

        let startX= 0;
        // 2.记录鼠标进过事件得到当前鼠标坐标
        banner.addEventListener('mouseenter',function(e){
           //清楚过渡效果，因为鼠标滑动不断计算结果来一定的，不需要过渡
           childs.forEach((ele)=>{
                ele.classList.remove("trans")
            })

            startX = e.clientX;

        })
        // 3. 鼠标经过事件，计算鼠标抵用距离让图标和视频旋转
        banner.addEventListener('mousemove',function(e){
            //  鼠标移动距离
            let level = e.clientX - startX;
            //移动距离在屏幕的占比
            let newX = level / window.outerWidth;
            //遍历所有图片和视频，根据鼠标移动距离来移动
            childs.forEach((ele,index)=>{
                // 计算移动距离 =  当前位置 + （移动距离在屏幕的占比 * 当前索引号）
                // 因为索引号，乘积越少，数字越小 
                const x = styleArray[index].x + newX * index + 12;
                // 如果是旋转的叶子，则需要调整rotate

                // 计算旋转角度
                const rotate = level * 0.02;
                //如果是叶子的图片或视频，则需要旋转
                if(index === 3 || index ===4){
                    ele.style = `transform: translate(${x}px,${styleArray[index].y}px) rotate(${rotate}deg);filter: blur(${styleArray[index].filter_blur}px)`;
                }else {
                    ele.style = `transform: translate(${x}px,${styleArray[index].y}px);filter: blur(${styleArray[index].filter_blur}px)`;
                }
            
            })
        })  
        // 4.鼠标离开复原开始的默认样式，先添加过渡
        banner.addEventListener("mouseleave",function(e){
            childs.forEach((ele)=>{
                ele.classList.add("trans")
            })

            init();
        })

    </script>
</body>
</html>